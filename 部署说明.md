# ğŸš€ CF AI Chat éƒ¨ç½²è¯´æ˜

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### ç¬¬1æ­¥ï¼šForké¡¹ç›®
1. ç‚¹å‡»GitHubé¡µé¢å³ä¸Šè§’çš„ **Fork** æŒ‰é’®
2. é€‰æ‹©Forkåˆ°æ‚¨çš„ä¸ªäººè´¦æˆ·

### ç¬¬2æ­¥ï¼šåˆ›å»ºKVå­˜å‚¨
1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com)
2. å·¦ä¾§èœå•ç‚¹å‡» **Workers & Pages**
3. ç‚¹å‡» **KV** æ ‡ç­¾é¡µ
4. ç‚¹å‡» **Create a namespace**
5. è¾“å…¥åç§°ï¼š`cf-ai-chat-history`
6. ç‚¹å‡» **Add**
7. **è®°å½•æ˜¾ç¤ºçš„å‘½åç©ºé—´ID**ï¼ˆç±»ä¼¼ï¼š`1a2b3c4d5e6f7g8h9i0j1k2l3m4n5o6p`ï¼‰

### ç¬¬3æ­¥ï¼šè·å–Cloudflareå‡­è¯

#### è·å–API Token
1. è®¿é—® [API Tokensé¡µé¢](https://dash.cloudflare.com/profile/api-tokens)
2. ç‚¹å‡» **Create Token**
3. é€‰æ‹© **Custom token**
4. è®¾ç½®æƒé™ï¼š
   ```
   Permissions:
   - Account: Cloudflare Workers:Edit
   - Zone: Zone Settings:Read
   - Zone: Zone:Read
   
   Account Resources:
   - Include: All accounts
   
   Zone Resources:
   - Include: All zones
   ```
5. ç‚¹å‡» **Continue to summary** â†’ **Create Token**
6. **å¤åˆ¶å¹¶ä¿å­˜Token**

#### è·å–Account ID
1. åœ¨Cloudflare Dashboardé¦–é¡µ
2. å³ä¾§æ æ‰¾åˆ° **Account ID**
3. ç‚¹å‡»å¤åˆ¶

### ç¬¬4æ­¥ï¼šé…ç½®GitHub Secrets
1. è¿›å…¥æ‚¨Forkçš„ä»“åº“
2. ç‚¹å‡» **Settings** æ ‡ç­¾é¡µ
3. å·¦ä¾§èœå• **Secrets and variables** â†’ **Actions**
4. ç‚¹å‡» **New repository secret** æ·»åŠ ï¼š

**Secret 1:**
- Name: `CLOUDFLARE_API_TOKEN`
- Secret: ç²˜è´´æ‚¨çš„API Token

**Secret 2:**
- Name: `CLOUDFLARE_ACCOUNT_ID`
- Secret: ç²˜è´´æ‚¨çš„Account ID

### ç¬¬5æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶
1. åœ¨æ‚¨çš„ä»“åº“ä¸­ç¼–è¾‘ `wrangler.toml` æ–‡ä»¶
2. ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š

```toml
name = "cf-ai-chat"
main = "src/worker.js"
compatibility_date = "2025-08-25"

[ai]
binding = "AI"

[[kv_namespaces]]
binding = "CHAT_HISTORY"
id = "æ‚¨çš„KVå‘½åç©ºé—´ID"          # æ›¿æ¢è¿™é‡Œ
preview_id = "æ‚¨çš„KVå‘½åç©ºé—´ID"   # æ›¿æ¢è¿™é‡Œ

[vars]
CHAT_PASSWORD = "æ‚¨çš„è®¿é—®å¯†ç "    # ä¿®æ”¹è¿™é‡Œ
```

### ç¬¬6æ­¥ï¼šæäº¤å¹¶éƒ¨ç½²
1. æäº¤æ›´æ”¹
2. GitHub Actionsä¼šè‡ªåŠ¨éƒ¨ç½²
3. ç­‰å¾…éƒ¨ç½²å®Œæˆ

## ğŸ¯ éƒ¨ç½²å®Œæˆå

### è®¿é—®åº”ç”¨
- WorkeråŸŸåï¼š`https://cf-ai-chat.æ‚¨çš„è´¦æˆ·å.workers.dev`
- åœ¨Cloudflare Dashboardçš„Workersé¡µé¢å¯ä»¥çœ‹åˆ°åŸŸå

### é¦–æ¬¡ä½¿ç”¨
1. æ‰“å¼€WorkeråŸŸå
2. è¾“å…¥æ‚¨åœ¨ `wrangler.toml` ä¸­è®¾ç½®çš„å¯†ç 
3. é€‰æ‹©AIæ¨¡å‹
4. å¼€å§‹èŠå¤©

## âš ï¸ é‡è¦å£°æ˜

### ä½œè€…ä¿¡æ¯ä¿æŠ¤
æœ¬é¡¹ç›®åŒ…å«ä½œè€…ä¿¡æ¯ä¿æŠ¤æœºåˆ¶ï¼š
- **ä½œè€…**ï¼šYouTubeï¼šåº·åº·çš„è®¢é˜…å¤©åœ°
- **ä¿æŠ¤çº§åˆ«**ï¼šä»£ç çº§åˆ« + å‰ç«¯éªŒè¯
- **ç¯¡æ”¹åæœ**ï¼šæœåŠ¡å°†æ‹’ç»è¿è¡Œ

**è¯·å‹¿ä¿®æ”¹ã€åˆ é™¤æˆ–ç¯¡æ”¹ä»»ä½•ä½œè€…ç›¸å…³ä¿¡æ¯ï¼Œå¦åˆ™æœåŠ¡å°†åœæ­¢å·¥ä½œï¼**

## ğŸ”§ é‡è¦é…ç½®è¯´æ˜

### wrangler.toml é…ç½®
```toml
# Workeråç§°
name = "cf-ai-chat"

# å…¥å£æ–‡ä»¶
main = "src/worker.js"

# å…¼å®¹æ€§æ—¥æœŸ
compatibility_date = "2025-08-25"

# AIæœåŠ¡ç»‘å®š
[ai]
binding = "AI"

# KVå­˜å‚¨ç»‘å®šï¼ˆæ³¨æ„æ˜¯åŒæ–¹æ‹¬å·ï¼‰
[[kv_namespaces]]
binding = "CHAT_HISTORY"
id = "æ‚¨çš„KVå‘½åç©ºé—´ID"
preview_id = "æ‚¨çš„KVå‘½åç©ºé—´ID"

# ç¯å¢ƒå˜é‡
[vars]
CHAT_PASSWORD = "æ‚¨çš„å¯†ç "
```

### GitHub Secrets è¯´æ˜
| Secretåç§° | è¯´æ˜ | è·å–æ–¹å¼ |
|-----------|------|----------|
| `CLOUDFLARE_API_TOKEN` | APIè®¿é—®ä»¤ç‰Œ | [API Tokensé¡µé¢](https://dash.cloudflare.com/profile/api-tokens) |
| `CLOUDFLARE_ACCOUNT_ID` | è´¦æˆ·ID | Dashboardå³ä¾§æ æ˜¾ç¤º |

## âŒ å¸¸è§é”™è¯¯

### 1. éƒ¨ç½²å¤±è´¥
**é”™è¯¯**: `The field "kv_namespaces" should be an array`
**è§£å†³**: ç¡®ä¿ä½¿ç”¨ `[[kv_namespaces]]` è€Œä¸æ˜¯ `[kv_namespaces]`

### 2. API Tokenæ— æ•ˆ
**é”™è¯¯**: `Authentication failed`
**è§£å†³**: é‡æ–°åˆ›å»ºAPI Tokenï¼Œç¡®ä¿æƒé™æ­£ç¡®

### 3. KVå‘½åç©ºé—´ä¸å­˜åœ¨
**é”™è¯¯**: `KV namespace not found`
**è§£å†³**: æ£€æŸ¥KVå‘½åç©ºé—´IDæ˜¯å¦æ­£ç¡®

### 4. å¯†ç éªŒè¯å¤±è´¥
**é”™è¯¯**: `å¯†ç é”™è¯¯`
**è§£å†³**: æ£€æŸ¥ `wrangler.toml` ä¸­çš„å¯†ç è®¾ç½®

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
- [ ] KVå‘½åç©ºé—´IDæ˜¯å¦æ­£ç¡®
- [ ] GitHub Secretsæ˜¯å¦è®¾ç½®æ­£ç¡®
- [ ] wrangler.tomlæ ¼å¼æ˜¯å¦æ­£ç¡®
- [ ] Cloudflareè´¦æˆ·æ˜¯å¦å¯ç”¨Workers AI

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„AIèŠå¤©åº”ç”¨ï¼ğŸ‰
